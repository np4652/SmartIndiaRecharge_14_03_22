function BindCityDropdown(n){let i=$("#searchJson").val();console.log(i);var t;i&&i!=""&&(t=jQuery.parseJSON(i),$("#CheckInDate1").val(t.CheckInDate),$("#CheckOutDate1").val(t.CheckOutDate));(n.length>=3||n.length==0)&&$.ajax({type:"Post",url:"/Hotel/bindcity/",data:{searchkey:n},datatype:"json",success:function(i){function f(n,t){function u(n){if(!n)return!1;f(n);i>=n.length&&(i=0);i<0&&(i=n.length-1);n[i].classList.add("autocomplete-active")}function f(n){for(var t=0;t<n.length;t++)n[t].classList.remove("autocomplete-active")}function r(t){for(var r=document.getElementsByClassName("autocomplete-items"),i=0;i<r.length;i++)t!=r[i]&&t!=n&&r[i].parentNode.removeChild(r[i])}var i;n.addEventListener("input",function(){var e,f,u,o=this.value;if(r(),!o)return!1;for(i=-1,e=document.createElement("DIV"),e.setAttribute("id",this.id+"autocomplete-list"),e.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(e),u=0;u<t.length;u++)t[u].cityName.substr(0,o.length).toUpperCase()==o.toUpperCase()&&(f=document.createElement("DIV"),f.innerHTML="<strong>"+t[u].cityName.substr(0,o.length)+"<\/strong>",f.innerHTML+=t[u].cityName.substr(o.length),f.innerHTML+="<input type='hidden' value='"+t[u].cityName+"' data-cityId='"+t[u].destinationID+"' data-countrycode='"+t[u].countryCode+"'>",f.addEventListener("click",function(){n.value=this.getElementsByTagName("input")[0].value;n.setAttribute("data-cityId",this.getElementsByTagName("input")[0].getAttribute("data-cityId"));n.setAttribute("data-countrycode",this.getElementsByTagName("input")[0].getAttribute("data-countrycode"));r()}),e.appendChild(f))});n.addEventListener("keydown",function(n){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div"));n.keyCode==40?(i++,u(t)):n.keyCode==38?(i--,u(t)):n.keyCode==13&&(n.preventDefault(),i>-1&&t&&t[i].click())});document.addEventListener("click",function(n){r(n.target)})}console.log(i);let u=[];$("#ddlhotelsearch").empty();for(var r=0;r<i.list.length;r++)if($("#ddlhotelsearch").append('<option value="'+i.list[r].destinationID+'">'+i.list[r].cityName+"<\/option>"),u.push({destinationID:i.list[r].destinationID,cityName:i.list[r].cityName,countryCode:i.list[r].countryCode}),t){let i=$("#ddlhotelsearch").find('option[value="'+t.CityId+'"]').text();$("#txthotel").attr("data-cityid",n.CityId);$("#txthotel").attr("data-countrycode",n.CountryCode);$("#txthotel").val(i)}f(document.getElementById("txthotel"),u)},error:function(n,t){console.log(n);console.log(t)}})}function HotelLoaderShow(n="",t="",i=""){let r=$("#HotelLoader");r.append(`<div class="Hotel-Loader" style="height: 70%; display: grid; width: 58%; margin: 6% auto 0; background-color:white; box-shadow: 2px 3px 18px -1px;">
        <div class="carousel slide carousel-fade" data-ride="carousel" data-interval="3000" id="carousel-1">
        <div class="carousel-inner" role="listbox">
            <div class="carousel-item active"><img class="img-fluid w-100 d-block" src="../Image/Hotel/LoaderBanner/b.jpg" alt="Slide Image">
                </div>
            <div class="carousel-item"><img class="img-fluid w-100 d-block" src="../Image/Hotel/LoaderBanner/b1.jpg" alt="Slide Image">
                
                   </div>
            <div class="carousel-item"><img class="img-fluid w-100 d-block" src="../Image/Hotel/LoaderBanner/b2.jpg" alt="Slide Image">
                </div>
            
        </div>
        
        <div>
            <a class="carousel-control-prev" href="#carousel-1" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon"><i class="la la-cutlery"></i></span>
                
            </a>
            <a class="carousel-control-next" href="#carousel-1" role="button" data-slide="next">
                <span class="carousel-control-next-icon"><i class="la la-cutlery"></i></span>
                
            </a>
        </div>
        
    </div>
        <div class="Search-text" style="background:white">
            <table class="table">
                <tbody><tr>
                    <td style="font-weight:bold">Destination</td>
                    <td style="font-weight:bold">:</td>
                    <td>${n}</td>
                    <td style="font-weight:bold">Checkin</td>
                    <td style="font-weight:bold">:</td>
                    <td>${t}</td>
                    <td style="font-weight:bold">CheckOut</td>
                    <td style="font-weight:bold">:</td>
                    <td>${i}</td>
                </tr>
                <tr>
                    <td colspan="10">
                        <div class="progress" style="margin-bottom:-20px !important">
                      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                Processing
                         </div>

                       </div>
                        
                    </td>
                </tr>
            </tbody></table>

        </div>

    </div>`);$("#HotelLoader").show()}$(document).ready(function(){function t(n){let i="";for(var t=0;t<n;t++)i+=`<li>
                                 <span class="latoBold font12 grayText appendBottom10 ageName">CHILD ${t+1} AGE</span><label class="lblAge" for="0">
                                    <select id="0" class="ageSelectBox">
                                        <option>Select</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                    </select>
                                </label>
                            </li>`;return i}function n(){$(".roomsGuests").find(".addRoomRow").each(function(n){let r=$(this),t=r.find(".addRoomLeft"),i=r.find(".addRoomRight");if(r.hasClass("active"))t.find("p").text("ROOM "+(n+1)),t.find("small").hide(),i.show();else{t.find("p").text("ROOM "+(n+1));let r=i.find(".adultCounter").find("input").val(),u=i.find(".childCounter").find("input").val()||0,f=(r>1?r+" Adults":r+" Adult")+", "+(u>1?u+" Children":u+" Child"),e=`<button type="button" class="btn btn-link btn-sm btnedit">edit</button>`,o=`<button type="button" class="btn btn-link btn-sm btnremove">remove</button>`;t.find("small").html("("+f+")"+e+o);t.find("small").show();i.hide()}})}BindCityDropdown("");$(".roomsGuests").on("click",".incNumber",function(){let i=$(this),n=i.parents(".input-group").find("input");if(n.val((parseInt(n.val())||0)+1),n.hasClass("childInput")){if(parseInt(n.val())>4){n.val(4);return}$(this).parents(".addRoomRow").find(".divChild ul").empty();let i=n.val();i>0?($(this).parents(".addRoomRow").find(".divChild").show(),$(this).parents(".addRoomRow").find(".divChild ul").html(t(i))):$(this).parents(".addRoomRow").find(".divChild").hide()}else if(n.val()>12){n.val(12);return}});$(".roomsGuests").on("click",".decNumber",function(){let i=$(this),n=i.parents(".input-group").find("input");if(n.val()>0&&n.val((parseInt(n.val())||0)-1),n.hasClass("childInput")){$(this).parents(".addRoomRow").find(".divChild ul").empty();let i=n.val();i>0?($(this).parents(".addRoomRow").find(".divChild").show(),$(this).parents(".addRoomRow").find(".divChild ul").html(t(i))):$(this).parents(".addRoomRow").find(".divChild").hide()}else if(n.val()<1){n.val(1);return}});$(".roomsGuests").on("click",".btnAddRoom",function(){let t=$(".roomsGuests").find(".addRoomRow").eq(0).clone(),i=$(".roomsGuestsTop");$(".roomsGuests").find(".addRoomRow").removeClass("active");t.addClass("active");i.append(t);n()});$(".roomsGuests").on("click",".btnedit",function(){let t=$(this),i=t.parents(".addRoomRow");$(".roomsGuests").find(".addRoomRow").removeClass("active");i.addClass("active");n()});$(".roomsGuests").on("click",".btnremove",function(){let t=$(this),i=t.parents(".addRoomRow");setTimeout(function(){i.remove();n()},300)});$(".roomsGuests").on("click",".btnApply",function(){let n=0,t=0;$(".roomsGuests").find(".addRoomRow").each(function(){let r=$(this),i=r.find(".addRoomRight");n+=parseInt(i.find(".adultCounter").find("input").val());t+=parseInt(i.find(".childCounter").find("input").val()||0)});let i=n>1?n+" Adults":n+" Adult",r=t>1?t+" Children":t+" Child";$(".btnDropdownToggle").find("a.dropdown-btn").find(".adult").text(i);$(".btnDropdownToggle").find("a.dropdown-btn").find(".children").text(r);$(".btnDropdownToggle").trigger("click")})});$("#btnSearch").on("click",function(){HotelLoaderShow($("#txthotel").val(),$("#CheckInDate1").val(),$("#CheckOutDate1").val());let r=$("#txthotel").attr("data-cityid"),u=$("#txthotel").attr("data-countrycode"),n=0,t=[],f=$("#CheckInDate1").val(),e=$("#CheckOutDate1").val();$(".roomsGuests").find(".addRoomRow").each(function(){let i=$(this),r=i.find(".addRoomRight"),e=parseInt(r.find(".adultCounter").find("input").val()),u=parseInt(r.find(".childCounter").find("input").val()),f=[];u>0&&i.find(".divChild ul li").each(function(){let n=isNaN($(this).find(".ageSelectBox").val())?0:$(this).find(".ageSelectBox").val();n>0&&f.push(n)});t.push({NoOfAdults:e,NoOfChild:u,ChildAge:f});n++});let i={CheckInDate:f,CheckOutDate:e,NoOfNights:1,CountryCode:u,CityId:r,PreferredCurrency:"INR",GuestNationality:"IN",NoOfRooms:n,RoomGuests:t};var o=JSON.stringify(i);$("#searchJsonlist").val(JSON.stringify(i));$("#frmSearch").submit()});