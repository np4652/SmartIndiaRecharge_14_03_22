const $AEPSDevice=Object.freeze({Mantra:1,Morpho:2,Tatvik:3,StarTech:4}),$PIDOptions=Object.freeze({1:'<?xml version="1.0"?><PidOptions ver="1.0"> <Opts fCount="1" fType="0" iCount="0" pCount="0" pgCount="2" format="0" pidVer="2.0" timeout="10000" pTimeout="20000"  posh="UNKNOWN" env="P" /> <CustOpts><Param name="mantrakey" value=""/><\/CustOpts><\/PidOptions>',2:'<PidOptions ver="1.0"><Opts fCount="1" fType="0" iCount="" iType="" pCount="" pType="" format="0" pidVer="2.0" timeout="10000" otp="" wadh="" posh=""/><\/PidOptions>',3:'<PidOptions ver="1.0"><Opts env="S" fCount="1" fType="0" format="0" pType="0" pCount="0" pgCount="0" pTimeout="20000" pidVer="2.0"><\/Opts><Demo><\/Demo><CustOpts><\/CustOpts><Bios><\/Bios><\/PidOptions>',4:""}),$PIDOptionsLive=Object.freeze({1:'<?xml version="1.0"?><PidOptions ver="1.0"> <Opts fCount="1" fType="1" iCount="0" pCount="0" pgCount="2" format="0" pidVer="2.0" timeout="10000" pTimeout="20000" wadh="E0jzJ/P8UopUHAieZn8CKqS4WPMi5ZSYXgfnlfkWjrc=" posh="UNKNOWN" env="P" /> <CustOpts><Param name="mantrakey" value=""/><\/CustOpts><\/PidOptions>',2:'<PidOptions ver="1.0"><Opts fCount="1" fType="1" iCount="" iType="" pCount="" pType="" format="0" pidVer="2.0" timeout="10000" otp="" wadh="E0jzJ/P8UopUHAieZn8CKqS4WPMi5ZSYXgfnlfkWjrc=" posh=""/><\/PidOptions>',3:'<PidOptions ver="1.0"><Opts env="S" fCount="1" fType="1" format="0" pType="0" pCount="0" pgCount="0" pTimeout="20000" pidVer="2.0"><\/Opts><Demo><\/Demo><CustOpts><\/CustOpts><Bios><\/Bios><\/PidOptions>',4:""}),$DeviceMethod=Object.freeze({1:{MSG_RD:"RDService found successfully for Mantra!",MSG_DI:"Mantra device found successfully!",MSG_DC:"Captured from Mantra device successfully!",DEVICEINFO:{Method:"DEVICEINFO",URL:"/rd/info"},CAPTURE:{Method:"CAPTURE",URL:"/rd/capture"}},2:{MSG_RD:"RDService found successfully for Morpho!",MSG_DI:"Morpho device found successfully!",MSG_DC:"Captured from Morpho device successfully!",DEVICEINFO:{Method:"DEVICEINFO",URL:"/getDeviceInfo"},CAPTURE:{Method:"CAPTURE",URL:"/capture"}},3:{MSG_RD:"RDService found successfully for Tatvik!",MSG_DI:"Tatvik device found successfully!",MSG_DC:"Captured from Tatvik device successfully!",DEVICEINFO:{Method:"DEVICEINFO",URL:"/rd/info"},CAPTURE:{Method:"CAPTURE",URL:"/rd/capture"}},4:{MSG_RD:"RDService found successfully for StarTech!",MSG_DI:"StarTech device found successfully!",MSG_DC:"Captured from StarTech device successfully!",DEVICEINFO:{Method:"DEVICEINFO",URL:"/rd/info"},CAPTURE:{Method:"CAPTURE",URL:"/rd/capture"}}}),$DeviceDPID=Object.freeze({1:{RD:"Mantra",info:"MFS"},2:{RD:"Morpho",info:"MSO"},3:{RD:"TMF20",info:"TMF20"},4:{RD:"FM220",info:"FM220"}}),$Startport=Object.freeze({1:11100,2:11100,3:11101,4:11100}),$Endport=Object.freeze({1:11105,2:11120,3:11105,4:11105});an.autoClose=0;class RDServiceHelper{constructor(n){this._deviceid=n;this._protocol="http:";this._domain="127.0.0.1";this._port=$Startport[n];this._IsPortFound=!1;this._IsDInfoFound=!1;this._outputData="";this._PIDOptions=$PIDOptions[n];this._AlertMsg="";this._AlertType=-1;this._preloader=preloader}ScanPort = function(n,t,i){this._IsDInfoFound=!1;let r=this,u,f;if(n>$Endport[this._deviceid])return this._IsPortFound===!1&&(r._AlertType=-1,r._AlertMsg="No RDService found for selected device!",console.warn(r._AlertMsg),an.title=r._AlertType===an.type.success?"Success":"Oops",an.content=r._AlertMsg,an.alert(r._AlertType)),btnLdr.StopWithText(t.btn,t.btnText),this._preloader.remove(),!0;if(this._IsPortFound===!0)return r._AlertType=1,r._AlertMsg=$DeviceMethod[r._deviceid].MSG_RD,an.title="Success",an.content=r._AlertMsg,an.alert(r._AlertType),btnLdr.StartWithAnyText(t.btn,"Getting DeviceInfo"),this.DeviceInfo(this._port,t,i),!0;$.ajax({url:r._protocol+"//"+r._domain+":"+n,type:"RDSERVICE","async":!0,crossDomain:!0,contentType:"text/xml; charset=utf-8",processData:!1,success:function(t){u=$.parseXML(t);u=u===null?t:u;f=$(u).find("RDService").attr("info");f!==undefined&&f.indexOf($DeviceDPID[r._deviceid].RD)>-1&&$DeviceDPID[r._deviceid].RD!==""&&(r._IsPortFound=!0,r._outputData=t,r._port=n)},error:function(n){n.status===404?console.warn("Requested path not find"):n.status===0?console.warn("Service Unavailable"):console.warn("Server error")},complete:function(){n++;r.ScanPort(n,t,i)}})}DeviceInfo = function(n,t,i){let r=this,u,f;if(n>$Endport[this._deviceid])return this._IsDInfoFound===!1&&(r._AlertType=-1,r._AlertMsg="Selected device is not connected with system. Please check it again!",console.warn(r._AlertMsg),an.title=r._AlertType===an.type.success?"Success":"Oops",an.content=r._AlertMsg,an.alert(r._AlertType)),btnLdr.StopWithText(t.btn,t.btnText),this._preloader.remove(),!0;if(this._IsDInfoFound===!0)return btnLdr.StartWithAnyText(t.btn,"Capturing..."),this._IsDCaptured=!1,this.CaputureDevice(i,t),!0;$.ajax({url:r._protocol+"//"+r._domain+":"+n+$DeviceMethod[r._deviceid].DEVICEINFO.URL,type:$DeviceMethod[r._deviceid].DEVICEINFO.Method,"async":!1,crossDomain:!0,contentType:"text/xml; charset=utf-8",processData:!1,success:function(n){u=$.parseXML(n);u===null&&(u=n);f=$(u).find("DeviceInfo").attr("mi");f!==undefined&&$DeviceDPID[r._deviceid].info!==""&&f!==""&&f.indexOf($DeviceDPID[r._deviceid].info)>-1&&$(u).find("DeviceInfo").attr("mc")!==""&&(r._IsDInfoFound=!0,r._outputData=n,r._AlertType=1,r._AlertMsg=$DeviceMethod[r._deviceid].MSG_DI,an.title="Success",an.content=r._AlertMsg,an.alert(r._AlertType))},error:function(n){n.status===404?console.warn("Requested path not find"):n.status===0?console.warn("Service Unavailable"):console.warn("Server error")},complete:function(){n++;r.DeviceInfo(n,t,i)}})}CaputureDevice = function(n,t){let i=this,r,u=-1,f;i._outputData="";$.ajax({url:i._protocol+"//"+i._domain+":"+i._port+$DeviceMethod[i._deviceid].CAPTURE.URL,data:i._PIDOptions,type:$DeviceMethod[i._deviceid].CAPTURE.Method,"async":!0,crossDomain:!0,contentType:"text/xml; charset=utf-8",processData:!1,success:function(e){r=$.parseXML(e);r===null&&(r=e);u=parseInt($(r).find("Resp").attr("errCode"));f=$(r).find("Resp").attr("errInfo");u===0?(i._AlertType=1,i._AlertMsg=$DeviceMethod[i._deviceid].MSG_DC,i._outputData=r,n(i._outputData)):(i._AlertType=-1,i._AlertMsg="Capture Error: "+f,btnLdr.StopWithText(t.btn,t.btnText),i._preloader.remove());an.title=i._AlertType===an.success?"Success":"Oops";an.content=i._AlertMsg;an.alert(i._AlertType)},error:function(n){n.status===404?console.warn("Requested path not find"):n.status===0?console.warn("Service Unavailable"):console.warn("Server error")},complete:function(){}})}}