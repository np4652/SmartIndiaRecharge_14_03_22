var AllButtonDetail={GButtonText:$("#btnCheckBalance").html(),GButton:$("#btnCheckBalance"),PAYButton:$("#btnPay"),GettingBalanceText:"Getting Balance...",WithdrawingText:"Withdrawing Cash...",DepositingText:"Depositing Cash...",MinstatementText:"Getting MiniStatement...",AadharPayText:"Paying with Aadhar...",1:"CASH WITHDRAWL",2:"CASH DEPOSIT",3:"MINI STATEMENT",4:"AADHAR PAY"},compareAndGetIndexOfObjectInList,ResetRecentBank;$(document).ready(function(){$("#ddl_Device").change(function(){localStorage.setItem("did",$("#ddl_Device").val());$("#imgDID").attr("src",$$host+"/Image/FPDevice/"+$("#ddl_Device").val()+".png")});var n=0;(localStorage.did===undefined||localStorage.did==="null")&&localStorage.setItem("did",1);n=localStorage.did==="0"?1:localStorage.did;$("#ddl_Device").val(n);$("#ddl_Device").change();ResetRecentBank();$("#recentBanks").removeAttr("data-recentbank");$("#btnAmount button").click(function(){$("#txtAmount").val($(this).val());$("#txtAmount").attr("step",$(this).val())});$('input[name="rdoGroupOp"]').change(function(){$('[for="txtAadhar"]').html("Aadhar");$("#txtAadhar").attr("placeholder","Enter Aadhar");$("#txtAmount").val("");$("#btnAmount").parent().removeClass("d-none");$("#btnCheckBalance").removeClass("d-none");$("#imgDID").removeClass("d-none");$("#ddl_Device").removeClass("d-none");$("#btnCheckBalance").removeClass("d-none");let t=$(this).attr("id").split("_")[1];var n=$(this).data().op;n!==undefined&&($("#txtAmount").attr("step",parseInt(n.min)),$("#txtAmount").attr("min",parseInt(n.min)),$("#txtAmount").attr("max",parseInt(n.max)),$("#txtAmount").attr("maxlength",(n.max+"").length));t==="1"?($("#btnPay").html(AllButtonDetail[1]),$("#btnPay").val(1)):t==="2"?($("#btnPay").html(AllButtonDetail[2]),$("#btnPay").val(2),$("#txtAadhar").attr("placeholder","Enter Account No"),$('[for="txtAadhar"]').html("Bank Account Number"),$("#imgDID").addClass("d-none"),$("#ddl_Device").addClass("d-none"),$("#btnCheckBalance").addClass("d-none")):t==="3"?($("#btnPay").html(AllButtonDetail[3]),$("#btnPay").val(3),$("#btnAmount").parent().addClass("d-none"),$("#btnCheckBalance").addClass("d-none")):t==="4"&&($("#btnPay").html(AllButtonDetail[4]),$("#btnPay").val(4))})});compareAndGetIndexOfObjectInList=function(n,t){for(_o in n)if(JSON.stringify(n[_o])===JSON.stringify(t))return _o;return-1};ResetRecentBank=function(){var r,n;let t=$("#recentBanks").data().recentbank;localStorage.recentBanks===undefined||localStorage.recentBanks==="null"||localStorage.recentBanks===""?localStorage.setItem("recentBanks",JSON.stringify($("#recentBanks").data().recentbank)):(t=JSON.parse(localStorage.recentBanks),t.length===0&&(localStorage.setItem("recentBanks",JSON.stringify($("#recentBanks").data().recentbank)),t=$("#recentBanks").data().recentbank));t=JSON.parse(localStorage.recentBanks);let u=!1;while(t.length>10)t.pop(),u=!0;u===!0&&localStorage.setItem("recentBanks",JSON.stringify(t));let i=t;$("#recentBanks").empty();for(r in i)n=document.createElement("img"),n.setAttribute("src",$$host+"/Image/BankLogo/"+i[r].id+".png"),n.setAttribute("class","rounded mx-auto p-2"),n.setAttribute("data-bankdata",JSON.stringify(i[r])),n.setAttribute("alt",i[r].bankName),n.setAttribute("data-toggle","tooltip"),n.setAttribute("data-html","true"),n.setAttribute("title",'<span class="text-capitalize">'+i[r].bankName+"<\/span>"),$("#recentBanks").append(n);$('[data-toggle="tooltip"]').tooltip();$("#recentBanks img").click(function(){let n=$(this).data().bankdata;$('[name = "BankList"]').val(n.bankName.toUpperCase()).attr("data-item-IIN",n.iin);$("#recentBanks img.active").removeClass("active");$(this).addClass("active")})};class Bank{constructor(){$(document).mouseup(n=>{var t=$('[name="BankList"]');t.is(n.target)||$("#suggestedList").is(n.target)||t.has(n.target).length!==0||$("#suggestedList").css("display","none")});this.bindBank();this.IsExists();$('[name="BankList"]').focus(()=>$("#suggestedList").css("display","block"));$('[name="BankList"]').on("keyup",function(){var n=$(this).val().toLowerCase();$("#suggestedList div").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(n)>-1)})})}bindBank(n=""){$.post("/bindAEPSBanks",{bankName:n}).done(n=>{var t=$('[name="BankList"]').parent();t.find("[name=suggestedList]").index()===-1?`${t.append('<div name="suggestedList" id="suggestedList"><\/div>')}`:"";for(let t=0;t<n.length;t++)$("[name=suggestedList]:contains("+n[t].bankName.toUpperCase()+")").index()===-1&&$("[name=suggestedList]").append(`<div data-item-IIN="${n[t].iin}" class="schild" data-selectedbank='${JSON.stringify(n[t])}'>
                                                        <img src="/Image/Banklogo/${n[t].id}.png"/> 
                                                        <span>${n[t].bankName}</span>
                                                      </div>`),$(".schild").unbind().click(n=>{$('[name = "BankList"]').val($(n.currentTarget).find("span").text()).attr("data-item-IIN",$(n.currentTarget).attr("data-item-IIN"));$("#suggestedList").css("display","none");let t=$(n.currentTarget).data().selectedbank;if(localStorage.recentBanks!==undefined&&localStorage.recentBanks!=="null"&&localStorage.recentBanks!==""){let n=JSON.parse(localStorage.recentBanks),i=compareAndGetIndexOfObjectInList(n,t);i>-1&&n.splice(i,1);n.unshift(t);localStorage.setItem("recentBanks",JSON.stringify(n));ResetRecentBank()}})})}IsExists(){$("#txtBank").keyup(n=>{var t=$(n.currentTarget).val();if(t.length>0){let n=$("[name=suggestedList]:contains("+t.toUpperCase()+")").index();n===-1&&this.bindBank(t);$('[name="BankList"]').focus(()=>$("#suggestedList").css("display","block"))}})}}let bank=new Bank;