"use strict";var Q,uploadImage;(n=>{n.loginInfo=()=>{$.ajax({type:"POST",url:"/LoginInfo",dataType:"json",contentType:"application/json",data:JSON.stringify({LoginTypeID:3}),success:function(n){n.name!==undefined&&(setInfo(n),$("body").removeAttr("class"))},error:function(n,t){an.title="Oops! Error";an.content=n.status===404?"Requested path not find":n.status===0?"Internet is not connected":"Server error";an.alert(an.type.failed);t==="parsererror"&&reload()}})},n.ChangePass=n=>{preloader.load(),$.post("/Employee/_ChangePassword",{IsMandate:n}).done(t=>{resultReload(t),mdlA.id="myalert",mdlA.content=t,mdlA.options.backdrop="static",mdlA.options.keyboard=!n,mdlA.alert(mdlA.size.small),$("button.close span,#mdlCancel").click(()=>mdlA.dispose())}).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)}).always(()=>preloader.remove())},n.GetComparision=()=>{let t=$("#hfUserID").val();$.post("/Employee/ComparisionChart",{UserID:t}).done(t=>{$("LMTDVsMTDGrid").empty().append('<table class="table table-hover">').find("table").append('<thead class="bg-tableth"><tr><th>Type<\/th><th>LM<\/th><th>LMTD<\/th><th>MTD<\/th><th>Growth<\/th><\/tr><\/thead>').append(t.map(n=>`<tr><td>${n.type}</td><td>${n.lm}</td><td>${n.lmtd}</td><td>${n.mtd}</td><td>${n.growth}%</td></tr>`));let i=[],r=[],u=[],f=[];i.push(t.map(n=>n.type));r.push(t.map(n=>n.lm));u.push(t.map(n=>n.lmtd));f.push(t.map(n=>n.mtd));n.ComparisionChart(i,r,u,f)}).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)}).always(()=>preloader.remove())},n.TargetSegment=()=>{$.post("/Employee/TargetSegment").done(n=>{$("#divTargetSegment").empty().append('<table class="table table-hover">').find("table").append('<thead class="bg-tableth"><tr><th>Type<\/th><th>Target<\/th><th>Achieve<\/th><th>Achieve(%)<\/th><th>Incentive<\/th><\/tr><\/thead>').append(n.map(n=>`<tr><td>${n.type}</td><td>${n.target}</td><td>${n.achieve}</td><td>${Math.round(parseFloat(n.achievePercent))}</td><td>${n.strIncentive}</td></tr>`))}).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)}).always(()=>preloader.remove())},n.CommitmentSummary=()=>{$.post("/Employee/GetCommitmentSummary").done(n=>{$("#divCommitmentSummary").empty().append(`<div class="text-monospace"><small><span><strong>Commitment : ${n.totalCommitment}/<strong></span> | <span><strong>Achieved : ${n.totalAchieved}<strong></span></small></div>`)}).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)}).always(()=>preloader.remove())},n.GetLastdayVsTodayData=()=>{$.post("/Employee/LastdayVsTodayData").done(t=>n.LastdayVsTodayChart(t)).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)}).always(()=>preloader.remove())},n.CommitmentSummarychart=()=>{$.post("/Employee/CommitmentSummarychart").done(n=>{let t=[],i=new Date,r=["January","February","March","April","May","June","July","August","September","October","November","December"][i.getMonth()];for(let i=0;i<n.length;i++){let r={name:n[i].service,y:n[i].amount,sliced:n[i].service==="Acheived"?!0:!1,selected:n[i].service==="Acheived"?!0:!1};t.push(r)}Highcharts.chart("chartdiv",{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",height:"300"},title:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%<\/b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}<\/b>: {point.percentage:.1f} %"}}},series:[{name:"Commitment Summery",colorByPoint:!0,data:t}]})}).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)}).always(()=>preloader.remove())},n.ComparisionChart=(n,t,i,r)=>{$("#divComparisionChart").highcharts({chart:{type:"column",height:"300"},title:{text:null},subtitle:{text:""},xAxis:{categories:n[0],crosshair:!0},yAxis:{min:0,title:{text:"type Wise"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}<\/span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: <\/td><td style="padding:0"><b>{point.y:.1f} Rs<\/b><\/td><\/tr>',footerFormat:"<\/table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[{name:"LM",data:t[0]},{name:"LMTD",data:i[0]},{name:"MTD",data:r[0]}]})},n.LastdayVsTodayChart=n=>{let t=[],i=[],r=[];t=n.map(n=>n.type);i=n.map(n=>n.lastDay);r=n.map(n=>n.today);$("#divLastdayVsTodayChart").highcharts({chart:{type:"column",height:"300"},title:{text:null},subtitle:{text:null},xAxis:{categories:t,crosshair:!0},yAxis:{min:0,title:{text:"type Wise"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}<\/span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: <\/td><td style="padding:0"><b>{point.y:.1f} Rs<\/b><\/td><\/tr>',footerFormat:"<\/table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.1,borderWidth:0}},series:[{name:"Lastday",data:i},{name:"Today",data:r}]})},n.EmpDownlineUser=()=>{$.post("/Employee/GetEmpDownlineUser").done(n=>{$("#divEmpDownlineUser").empty().append('<table class="table table-hover">').find("table").append('<thead class="bg-tableth"><tr><th>#<\/th><th>User<\/th><th>Mobile<\/th><th>Attandance<\/th><\/tr><\/thead>').append(n.map((n,t)=>`<tr><td>${t+1}</td><td>${n.userName}[${n.prefix+n.userID}]</td><td>${n.userMobile}</td><td ${n.attandance===!0?'class="btn btn-sm btn-success"':'class="btn btn-sm btn-danger"'}>${n.attandance===!0?"P":"A"}</td></tr>`))}).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)}).always(()=>preloader.remove())},n.LivePST=()=>{$("toadyLivePST").append('<div class="secction-Overlay"><span><img src="/images/Curve-Loading.gif" style="width:325px"/><\/span><\/div>'),$.post("/Employee/TodayLivePST").done(n=>{$("toadyLivePST").find("table").remove(),$("toadyLivePST").append('<table class="table table-hover">').find("table").append('<thead class="bg-tableth"><tr><th>Type<\/th><th>TotalAmount<\/th><th>Total Transaction<\/th><th>Unique Transaction<\/th><\/tr><\/thead>').append(n.map(n=>{let t="";switch(n.type){case"Primary":t='<a href="/FundReceiveStatement?IsSelf=0&RecBy=1" class="text-monospace btn btn-sm btn-outline-info float-right ml-1" target="_blank"><i class="fa fa-eye"><\/i> View<\/a><a class="btn btn-sm btn-outline-info float-right btnTodayActiveUser" data-type-Id="1"><i class="fas fa-users"><\/i><\/a>';break;case"Secoundary":t='<a href="/FundReceiveStatement?IsSelf=0" class="text-monospace btn btn-sm btn-outline-info float-right ml-1" target="_blank"><i class="fa fa-eye"><\/i> View<\/a><a class="btn btn-sm btn-outline-info float-right btnTodayActiveUser" data-type-Id="2"><i class="fas fa-users"><\/i><\/a>';break;case"Tertiary":t='<a href="/Home/RechargeReport" class="text-monospace btn btn-sm btn-outline-info float-right ml-1" target="_blank"><i class="fa fa-eye"><\/i> View<\/a><a class="btn btn-sm btn-outline-info float-right btnTodayActiveUser" data-type-Id="3"><i class="fas fa-users"><\/i><\/a>';break;case"Package":t='<a href="javascript:Q.TodaySellPackages()" class="text-monospace btn btn-sm btn-outline-info float-right"><i class="fa fa-eye"><\/i> View<\/a>';break;case"Outlet":t='<a href="javascript:Q.TodayOutletsListForEmp()" class="text-monospace btn btn-sm btn-outline-info float-right"><i class="fa fa-eye"><\/i> View<\/a>'}return"<tr><td>"+n.type+"<\/td><td>"+n.totalAmount+"<\/td><td>"+n.totalUser+"<\/td><td>"+n.uniqueUser+' <span class="ml-2">'+t+"<\/span><\/td><\/tr>"})),$(".secction-Overlay").remove(),$(".btnTodayActiveUser").unbind().click(n=>{preloader.load();let t={type:$(n.currentTarget).data().typeId};$.post("/TodayTransactors",t).done(n=>{mdlA.id="todayTransactors",mdlA.title="Active Users(Today)",mdlA.content=n,mdlA.modal(mdlA.size.large)}).always(()=>preloader.remove())})}).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)}).always(()=>preloader.remove())},n.TodayOutletsListForEmp=()=>{preloader.load(),$.post("/Employee/TodayOutletsListForEmp").done(n=>{let t='<div class="col-sm-12"><h4 class="text-monospace text-danger">No Record Found<\/h4><\/div>';if(n.length>0){let i=n.map(n=>"<tr><td>"+n.name+"<\/td><td>"+n.outletName+"<\/td><td>"+n.mobileNo+"<\/td><td>"+n.role+"<\/td><\/tr>");t='<table class="table table-hover"><thead class="bg-tableth"><tr><th>Name<\/th><th>OutletName<\/th><th>MobileNo<\/th><th>Role<\/th><\/tr><\/thead><tbody>'+i+"<\/tbody><\/table>"}mdlA.id="userList";mdlA.title="Today Joining";mdlA.content=t;mdlA.modal(mdlA.size.large)}).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)}).always(()=>preloader.remove())},n.TodaySellPackages=()=>{preloader.load(),$.post("/Employee/TodaySellPackages").done(n=>{let t='<div class="col-sm-12"><h4 class="text-monospace text-danger">No Record Found<\/h4><\/div>';if(n.length>0){let i=n.map(n=>`<tr><td> ${n.name}</td><td>$[e.outletNamet]</td><td>${n.packageName}</td></tr>`);t='<table class="table table-hover"><thead class="bg-tableth"><tr><th>Name<\/th><th>OutletName<\/th><th>PackageName<\/th><\/tr><\/thead><tbody>'+i+"<\/tbody><\/table>"}mdlA.id="userList";mdlA.title="Today's Sold Packages";mdlA.content=t;mdlA.modal(mdlA.size.large)}).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)}).always(()=>preloader.remove())},n.LastSevenDayPSTChart=()=>{$.post("/Employee/GetLastSevenDayPST").done(n=>{let t=n.map(n=>n.transactionDate.substring(0,7)),i=[{name:"Primary",data:n.map(n=>n.primary)}];Highcharts.chart("LastSeveDayPrimary",{chart:{type:"spline",height:"300"},title:{text:null},subtitle:{text:null},yAxis:{min:0,max:25e5,title:{text:"Amount"}},xAxis:{categories:t},labels:{formatter:function(){return this.value+""}},tooltip:{crosshairs:!0,shared:!0},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},plotOptions:{series:{label:{connectorAllowed:!1},pointStart:0}},series:i,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}});let r=[{name:"Secondary",data:n.map(n=>n.secoundary)}];Highcharts.chart("LastSeveDaySecondary",{chart:{type:"spline",height:"300"},title:{text:null},subtitle:{text:null},yAxis:{min:0,max:25e5,title:{text:"Amount"}},xAxis:{categories:t},labels:{formatter:function(){return this.value+""}},tooltip:{crosshairs:!0,shared:!0},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},plotOptions:{series:{label:{connectorAllowed:!1},pointStart:0}},series:r,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}});let u=[{name:"Tertiary",data:n.map(n=>n.tertiary)}];Highcharts.chart("LastSeveDayTertiary",{chart:{type:"spline",height:"300"},title:{text:null},subtitle:{text:null},yAxis:{min:0,max:25e5,title:{text:"Amount"}},xAxis:{categories:t},labels:{formatter:function(){return this.value+""}},tooltip:{crosshairs:!0,shared:!0},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},plotOptions:{series:{label:{connectorAllowed:!1},pointStart:0}},series:u,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}})}).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)}).always(()=>preloader.remove())},n.followUpStats=()=>{$.post("/Employee/LeadStats").done(n=>{$("#linkCurrentTotal").attr("href","Employee/LeadDetail?status=All").find("h2").text(n.total),$("#linkCurrentJunk").attr("href","Employee/LeadDetail?status=junk").find("h2").text(n.junk),$("#linkCurrentFollowup").attr("href","Employee/LeadDetail?status=FollowUP").find("h2").text(n.followup),$("#linkCurrentMatured").attr("href","Employee/LeadDetail?status=Matured").find("h2").text(n.matured),$("#linkTodayFollowup").attr("href","Employee/LeadDetail?status=FollowUP&onlyTodayFollowup=true").find("h2").text(n.todayFollowup)}).fail(n=>{an.title="Oops",an.content=n.status===0?"Internet Connection was broken":"Server error",an.alert(an.type.failed)})}})(Q||(Q={}));$("#changepass").unbind().click(()=>Q.ChangePass(!1));$(document).ready(function(){Q.loginInfo();$("#btnCreateLeadWin").click(()=>{$.post("/Employee/CreateLead").done(n=>{mdlA.id="createLeadWin",mdlA.title="Create Lead",mdlA.content=n,mdlA.modal(mdlA.size.large)})})});uploadImage=function(){var t,n;alert("in");t=$("#txtmobileno").val();t.length<9?(an.title="Oops",an.content="Mobile Number field is mandatory",an.alert(-1)):(preloader.load(),n=new FormData,n.append("file",$("#dimageUpload1")[0].files[0]),n.append("Mobile",t),$.ajax({url:"/Employee-upload-shopImage",type:"post",data:n,contentType:!1,processData:!1,success:function(n){an.title=n.statuscode===1?"Success":"Oops";an.content=n.msg;an.alert(n.statuscode);preloader.remove()}}))};